<div class="card card-config">
    <div class="card-header">
        <h2 class="card-title">Server Configuration</h2>
    </div>
    <form method="POST" id="startup-params-form">
        <input type="hidden" name="confirm_reset_saves" id="confirm-reset-saves-flag" value="0" />
        <div class="form-grid-compact">
            <div class="form-row form-row-full">
                <label>Server Path:</label>
                <span class="readonly-field">{{.serverPath}}</span>
            </div>

            <div class="form-row grid-2 grid-items-end">
                <div>
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" value="{{.server.Name}}" class="form-input-inline" placeholder="Server Name" autocomplete="off">
                </div>
                <div>
                    <label for="port">Port:</label>
                    <input type="number" id="port" name="port" value="{{.server.Port}}" class="form-input-inline" placeholder="7777" autocomplete="off">
                </div>
            </div>

            <div class="form-row grid-2">
                <div>
                    <label for="start_location">Start Location:</label>
                    <select name="start_location" id="start_location" class="form-select-inline" aria-label="Start Location">
                        <option value="">Loading...</option>
                    </select>
                </div>
            </div>

            <div class="form-row grid-2">
                <div>
                    <label for="start_condition">Start Condition:</label>
                    <select name="start_condition" id="start_condition" class="form-select-inline" aria-label="Start Condition">
                        <option value="">Loading...</option>
                    </select>
                </div>
                <div>
                    <label for="difficulty">Difficulty:</label>
                    <select name="difficulty" id="difficulty" class="form-select-inline" aria-label="Difficulty">
                        <option value="">Loading...</option>
                    </select>
                </div>
            </div>

            <div class="form-row grid-2 grid-items-end">
                <div>
                    <label for="max_clients">Max Players:</label>
                    <input type="number" id="max_clients" name="max_clients" value="{{.server.MaxClients}}" class="form-input-inline" placeholder="8" autocomplete="off">
                </div>
                <div>
                    <label for="save_interval">Save Interval (sec):</label>
                    <input type="number" id="save_interval" name="save_interval" value="{{.server.SaveInterval}}" class="form-input-inline" placeholder="300" autocomplete="off">
                </div>
            </div>

            <div class="form-row grid-2 grid-items-end">
                <div>
                    <label for="restart_delay_seconds">Restart Delay (sec):</label>
                    <input type="number" id="restart_delay_seconds" name="restart_delay_seconds" value="{{.server.RestartDelaySeconds}}" class="form-input-inline" min="0" max="3600" placeholder="0" autocomplete="off">
                </div>
                <div>
                    <label for="shutdown_delay_seconds">Shutdown Delay (sec):</label>
                    <input type="number" id="shutdown_delay_seconds" name="shutdown_delay_seconds" value="{{.server.ShutdownDelaySeconds}}" class="form-input-inline" min="0" max="3600" placeholder="2" autocomplete="off">
                </div>
            </div>

            <div class="form-row form-row-full">
                <label for="welcome_message">Welcome Message:</label>
                <input type="text" id="welcome_message" name="welcome_message" value="{{.server.WelcomeMessage}}" class="form-input-inline" placeholder="Optional message sent to chat when a player connects" autocomplete="off">
                <button type="button" class="btn btn-secondary btn-min-sm" id="welcome-token-help" title="Show available chat tokens" style="margin-left: 8px;">Tokens</button>
                <p class="help-text">If set, this message will be broadcast to chat when a player connects.</p>
            </div>

            

            <div class="form-row grid-2 grid-items-end">
                <div>
                    <label for="auth_secret">Auth Secret:</label>
                    <input type="text" id="auth_secret" name="auth_secret" value="{{.server.AuthSecret}}" class="form-input-inline" placeholder="Auth Secret" autocomplete="off">
                </div>
                <div>
                    <label for="password">Server Password:</label>
                    <input type="password" id="password" name="password" value="{{.server.Password}}" class="form-input-inline" placeholder="Password" autocomplete="current-password">
                </div>
            </div>

            <div class="form-row grid-2 grid-items-center">
                <div>
                    <label>Game Version:</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="beta" value="false" {{if not .server.Beta}}checked{{end}}> Release
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="beta" value="true" {{if .server.Beta}}checked{{end}}> Beta
                        </label>
                    </div>
                </div>
                <div>
                    <label for="disconnect_timeout">Disconnect Timeout (ms):</label>
                    <input type="number" id="disconnect_timeout" name="disconnect_timeout" value="{{.server.DisconnectTimeout}}" class="form-input-inline" min="1000" max="600000" step="1000" placeholder="10000" autocomplete="off">
                </div>
            </div>

            

            

            <div class="form-row grid-2 grid-items-end">
                <div>
                    <label for="max_auto_saves">Max Auto Saves:</label>
                    <input type="number" id="max_auto_saves" name="max_auto_saves" value="{{.server.MaxAutoSaves}}" class="form-input-inline" min="1" max="1000" placeholder="5" autocomplete="off">
                </div>
                <div>
                    <label for="max_quick_saves">Max Quick Saves:</label>
                    <input type="number" id="max_quick_saves" name="max_quick_saves" value="{{.server.MaxQuickSaves}}" class="form-input-inline" min="1" max="1000" placeholder="5" autocomplete="off">
                </div>
            </div>

            
            <div class="form-row form-row-full" style="display:block;">
                <div class="checkbox-inline" style="display:flex; flex-wrap: wrap; gap: var(--space-3);">
                    <label class="radio-label"><input type="checkbox" id="server_visible" name="server_visible" {{if .server.Visible}}checked{{end}}> Public</label>
                    <label class="radio-label"><input type="checkbox" id="auto_start" name="auto_start" {{if .server.AutoStart}}checked{{end}}> Auto Start</label>
                    <label class="radio-label"><input type="checkbox" id="auto_save" name="auto_save" {{if .server.AutoSave}}checked{{end}}> Auto Save</label>
                    <label class="radio-label"><input type="checkbox" id="auto_pause" name="auto_pause" {{if .server.AutoPause}}checked{{end}}> Auto Pause</label>
                    <label class="radio-label"><input type="checkbox" id="auto_update" name="auto_update" {{if .server.AutoUpdate}}checked{{end}}> Auto Update</label>
                    <label class="radio-label"><input type="checkbox" id="delete_skeleton_on_decay" name="delete_skeleton_on_decay" {{if .server.DeleteSkeletonOnDecay}}checked{{end}}> Delete Skeleton On Decay</label>
                    <label class="radio-label"><input type="checkbox" id="use_steam_p2p" name="use_steam_p2p" {{if .server.UseSteamP2P}}checked{{end}}> Use Steam P2P</label>
                </div>
            </div>
        </div>
        <div class="control-actions mt-3">
            <button type="submit" name="update" value="true" class="btn btn-primary btn-min-lg" title="Apply the startup parameter changes for this server">
                <svg class="icon-inline" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a 2 2 0 0 1-2 2z"></path>
                    <polyline points="17 21 17 13 7 13 7 21"></polyline>
                    <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
                Update
            </button>
        </div>
    </form>
</div>
