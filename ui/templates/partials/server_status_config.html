{{define "server_status_config.html"}}
<div class="card col-span-full" id="server-config-card">
    <form id="server-config-form">
        <div class="card-header">
            <div class="flex items-center gap-2">
                <i data-feather="settings"></i>
                <h2 class="card-title">Configuration</h2>
            </div>
            <button type="button" id="serverConfigToggle" class="btn btn-ghost btn-sm" aria-expanded="false" aria-controls="serverConfigContent">
                <span id="serverConfigToggleLabel">Expand</span>
                <i data-feather="chevron-down" class="transform transition-transform"></i>
            </button>
        </div>

        <div id="serverConfigContent" class="hidden">
            <div class="card-body grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <div class="flex flex-col gap-4">
                    <h3 class="text-lg font-semibold border-b pb-2">General</h3>
                    <div class="form-group">
                        <label for="server-name-input" class="form-label">Server Name</label>
                        <input type="text" id="server-name-input" name="Name" value="{{.server.Name}}" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="server-password" class="form-label">Password</label>
                        <input type="password" id="server-password" name="Password" value="{{.server.Password}}" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="server-max-clients" class="form-label">Max Players</label>
                        <input type="number" id="server-max-clients" name="MaxClients" value="{{.server.MaxClients}}" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="server-port" class="form-label">Port</label>
                        <input type="number" id="server-port" name="Port" value="{{.server.Port}}" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="server-query-port" class="form-label">Query Port</label>
                        <input type="number" id="server-query-port" name="QueryPort" value="{{.server.QueryPort}}" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="server-language" class="form-label">Language</label>
                        <select id="server-language" name="Language" class="form-select">
                            <option value="" {{if not .server.Language}}selected{{end}}>Default (English)</option>
                            {{range .languages}}
                            <option value="{{.Code}}" {{if eq .Code $.server.Language}}selected{{end}}>{{.Name}}</option>
                            {{end}}
                        </select>
                    </div>
                </div>

                <div class="flex flex-col gap-4">
                    <h3 class="text-lg font-semibold border-b pb-2">Gameplay</h3>
                    <div class="form-group">
                        <label for="server-game-mode" class="form-label">Game Mode</label>
                        <select id="server-game-mode" name="GameMode" class="form-select">
                            <option value="survival" {{if eq .server.GameMode "survival"}}selected{{end}}>Survival</option>
                            <option value="creative" {{if eq .server.GameMode "creative"}}selected{{end}}>Creative</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="server-save-interval" class="form-label">Save Interval (minutes)</label>
                        <input type="number" id="server-save-interval" name="SaveInterval" value="{{.server.SaveInterval}}" class="form-control">
                    </div>
                    <label class="form-group-tile">
                        <input type="checkbox" id="server-pause-empty" name="PauseWhenEmpty" class="form-switch" {{if .server.PauseWhenEmpty}}checked{{end}}>
                        <span>Pause When Empty</span>
                    </label>
                    <label class="form-group-tile">
                        <input type="checkbox" id="server-player-saves" name="PlayerSaves" class="form-switch" {{if .server.PlayerSaves}}checked{{end}}>
                        <span>Allow Player Saves</span>
                    </label>
                </div>

                <div class="flex flex-col gap-4">
                    <h3 class="text-lg font-semibold border-b pb-2">Advanced</h3>
                    <label class="form-group-tile">
                        <input type="checkbox" id="server-auto-update" name="AutoUpdate" class="form-switch" {{if .server.AutoUpdate}}checked{{end}}>
                        <span>Auto-update</span>
                    </label>
                    <label class="form-group-tile">
                        <input type="checkbox" id="server-beta" name="Beta" class="form-switch" {{if .server.Beta}}checked{{end}}>
                        <span>Beta Branch</span>
                    </label>
                    <label class="form-group-tile">
                        <input type="checkbox" id="server-public" name="Public" class="form-switch" {{if .server.Public}}checked{{end}}>
                        <span>Public</span>
                    </label>
                    <label class="form-group-tile">
                        <input type="checkbox" id="server-enable-upnp" name="EnableUPnP" class="form-switch" {{if .server.EnableUPnP}}checked{{end}}>
                        <span>Enable UPnP</span>
                    </label>
                </div>
            </div>

            <div class="card-footer flex justify-end gap-2">
                <button type="button" id="btn-reset-config" class="btn btn-secondary">
                    <i data-feather="refresh-cw"></i>
                    <span>Reset</span>
                </button>
                <button type="submit" class="btn btn-primary" {{if .server.Running}}disabled title="Stop the server to save changes"{{end}}>
                    <i data-feather="save"></i>
                    <span>Save Configuration</span>
                </button>
            </div>
        </div>
    </form>
</div>
{{end}}
