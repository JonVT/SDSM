{{define "title"}}{{.server.Name}}{{end}}
{{define "page"}}server/{{.server.ID}}{{end}}

{{define "server_status.html"}}
<div class="server-content grid gap-6"
    data-page-title="Server {{.server.Name}}"
    data-server-id="{{.server.ID}}"
    data-server-name="{{.server.Name}}"
    data-server-running="{{if .server.Running}}true{{else}}false{{end}}"
    data-server-paused="{{if .server.Paused}}true{{else}}false{{end}}"
    data-server-starting="{{if .server.Starting}}true{{else}}false{{end}}"
    data-server-stopping="{{if .server.Stopping}}true{{else}}false{{end}}"
    data-server-storming="{{if .server.Storming}}true{{else}}false{{end}}"
    data-shutdown-delay="{{.server.ShutdownDelaySeconds}}"
    data-player-saves="{{if .server.PlayerSaves}}true{{else}}false{{end}}"
    data-player-save-excludes="{{range $index, $id := .server.PlayerSaveExcludes}}{{if $index}},{{end}}{{ $id }}{{end}}"
    {{if .banned_ids}}data-banned-ids="{{range $index, $id := .banned_ids}}{{if $index}},{{end}}{{ $id }}{{end}}"{{end}}
    {{if .server.ServerStarted}}data-server-started="{{.server.ServerStarted.Format "2006-01-02T15:04:05Z07:00"}}"{{end}}
    {{if .server.ServerSaved}}data-server-saved="{{.server.ServerSaved.Format "2006-01-02T15:04:05Z07:00"}}"{{end}}>

    {{/* Error Banner */}}
    <div id="server-error-banner" class="alert alert-danger {{if not .server.LastError}}hidden{{end}} col-span-full" role="alert">
        <div class="alert-icon">
            <i data-feather="alert-circle"></i>
        </div>
        <div class="alert-content">
            <h4 class="alert-title">Startup Error Detected</h4>
            <p id="server-error-text" class="alert-message">{{ .server.LastError }}</p>
            {{if .server.LastErrorAt}}
            <p class="alert-meta">Occurred at <span id="server-error-time">{{ .server.LastErrorAt.Format "Jan 2, 2006 3:04:05 PM" }}</span></p>
            {{end}}
        </div>
    </div>

    {{template "server_status_info.html" .}}

    <div class="server-card-grid server-card-grid-halves">
        {{template "server_status_control.html" .}}
        {{template "server_status_players.html" .}}
        {{template "server_status_chat.html" .}}
        {{template "server_status_saves.html" .}}
        {{template "server_status_config.html" .}}
        {{template "server_status_discord.html" .}}
    </div>

    {{template "server_status_logs.html" .}}
</div>

<script src="/static/js/server_status.js" defer></script>
{{end}}
