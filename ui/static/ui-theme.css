:root {
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-7: 2rem;
    --space-8: 2.5rem;
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.375rem;
    --text-2xl: 1.75rem;
    --radius-sm: 0.45rem;
    --radius-md: 0.75rem;
    --radius-lg: 1.15rem;
    --radius-xl: 1.85rem;
    --radius-full: 999px;
    --shadow-sm: 0 6px 18px rgba(15, 23, 42, 0.18);
    --shadow-md: 0 18px 38px rgba(15, 23, 42, 0.28);
    --shadow-lg: 0 32px 60px rgba(15, 23, 42, 0.35);
    --transition-fast: 140ms ease;
    /* Dashboard server card sizing */
    --server-card-width: 400px;
    --server-card-height: 280px;
    /* Button width utilities (standardized scale) */
    --btn-w-xs: 72px;
    --btn-w-sm: 112px;
    --btn-w-md: 128px;
    --btn-w-lg: 160px;

    /* Accent/surface tokens for reusable status pills */
    --accent-600: #6366f1; /* indigo-600 */
    --accent-700: #4f46e5; /* indigo-700 */
    --danger-600: #dc2626; /* red-600 */
    --danger-700: #b91c1c; /* red-700 */
    --success-600: #16a34a; /* green-600 */
    --success-700: #15803d; /* green-700 */

    /* Per-status computed tokens (backgrounds use light tints) */
    --status-idle-bg: var(--bg-tertiary);
    --status-idle-text: var(--text-tertiary);
    --status-idle-border: var(--border-color);
    --status-idle-dot: rgba(100, 116, 139, 0.9);

    --status-running-bg: rgba(99, 102, 241, 0.12); /* indigo tint */
    --status-running-text: var(--accent-600);
    --status-running-border: rgba(99, 102, 241, 0.35);
    --status-running-dot: var(--accent-600);

    --status-error-bg: rgba(220, 38, 38, 0.12); /* red tint */
    --status-error-text: var(--danger-700);
    --status-error-border: rgba(220, 38, 38, 0.35);
    --status-error-dot: var(--danger-600);

    --status-complete-bg: rgba(22, 163, 74, 0.12); /* green tint */
    --status-complete-text: var(--success-700);
    --status-complete-border: rgba(22, 163, 74, 0.35);
    --status-complete-dot: var(--success-600);
}

[data-theme="light"] {
    --page-background: linear-gradient(135deg, #e2e8f0 0%, #f8fafc 35%, #ffffff 100%);
    --bg-primary: rgba(255, 255, 255, 0.92);
    --bg-secondary: rgba(241, 245, 249, 0.86);
    --bg-tertiary: rgba(226, 232, 240, 0.75);
    --text-primary: #0f172a;
    --text-secondary: #1f2937;
    --text-tertiary: #475569;
    --border-color: rgba(203, 213, 225, 0.55);
    --panel-border: rgba(148, 163, 184, 0.32);
    --panel-gradient: linear-gradient(155deg, rgba(255, 255, 255, 0.96), rgba(226, 232, 240, 0.9));
    --surface-soft: rgba(226, 232, 240, 0.55);
    --surface-subtle: rgba(226, 232, 240, 0.7);
    --input-surface: rgba(255, 255, 255, 0.92);
    --input-border: rgba(148, 163, 184, 0.38);
    --chip-bg: rgba(37, 99, 235, 0.12);
    --chip-text: #1d4ed8;
    --primary-500: #2563eb;
    --primary-600: #1d4ed8;
    --success-500: #10b981;
    --danger-500: #ef4444;
    --warning-500: #f59e0b;
}

[data-theme="dark"] {
    --page-background: radial-gradient(circle at 15% 20%, rgba(30, 41, 59, 0.4) 0%, rgba(15, 23, 42, 0.88) 45%, rgba(2, 6, 23, 0.96) 100%);
    --bg-primary: rgba(17, 24, 39, 0.87);
    --bg-secondary: rgba(30, 41, 59, 0.78);
    --bg-tertiary: rgba(51, 65, 85, 0.62);
    --text-primary: #f8fafc;
    --text-secondary: #cbd5f5;
    --text-tertiary: #94a3b8;
    --border-color: rgba(148, 163, 184, 0.28);
    --panel-border: rgba(99, 102, 241, 0.25);
    --panel-gradient: linear-gradient(160deg, rgba(17, 24, 39, 0.94), rgba(15, 23, 42, 0.84));
    --surface-soft: rgba(15, 23, 42, 0.22);
    --surface-subtle: rgba(15, 23, 42, 0.32);
    --input-surface: rgba(15, 23, 42, 0.22);
    --input-border: rgba(148, 163, 184, 0.32);
    --chip-bg: rgba(37, 99, 235, 0.45);
    --chip-text: #dbeafe;
    --primary-500: #3b82f6;
    --primary-600: #2563eb;
    --success-500: #22c55e;
    --danger-500: #ef4444;
    --warning-500: #f59e0b;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

a {
    color: inherit;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

body {
    font-family: 'Inter', 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    min-height: 100vh;
    background: var(--page-background);
    background-attachment: fixed;
    color: var(--text-primary);
    line-height: 1.55;
    padding: clamp(var(--space-3), 3vw, var(--space-6));
}

.page-shell {
    display: flex;
    flex-direction: column;
    gap: var(--space-5);
    min-height: 100vh;
    /* Ensure child flex items (containers) stretch full available width */
    align-items: stretch;
}

.container {
    max-width: 1280px;
    margin: 0 auto;
    /* Prevent incidental shrink-to-fit; always occupy full row width up to max */
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.hero-card {
    display: grid;
    grid-template-columns: minmax(0, auto) minmax(0, 1fr) auto;
    gap: var(--space-4);
    align-items: center;
    /* Make header fill its container width for consistent measurements */
    width: 100%;
    padding: var(--space-4) var(--space-6);
    background: var(--panel-gradient);
    border-radius: var(--radius-xl);
    border: 1px solid var(--panel-border);
    box-shadow: var(--shadow-lg);
    color: var(--text-primary);
    position: relative;
    overflow: hidden;
    /* Slightly tighter header height to match cards */
    min-height: 132px;
}

.hero-card::after {
    /* Remove decorative overlay to match card look */
    content: none;
}

.hero-main {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.hero-logo {
    width: 72px;
    height: 72px;
    border-radius: 1.3rem;
    border: 2px solid rgba(255, 255, 255, 0.25);
    background: rgba(255, 255, 255, 0.12);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 18px 32px rgba(15, 23, 42, 0.35);
    object-fit: cover;
}

.hero-heading {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    position: relative;
    z-index: 1;
}

.hero-title {
    font-size: clamp(1.75rem, 3vw, 2.4rem);
    font-weight: 700;
    letter-spacing: -0.01em;
    color: var(--text-primary);
}

.hero-subtitle {
    font-size: var(--text-sm);
    color: var(--text-tertiary);
}

.hero-meta {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    position: relative;
    z-index: 1;
    max-width: clamp(240px, 40vw, 420px);
}

.hero-meta-title {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--text-secondary);
}

.hero-meta-text {
    font-size: var(--text-sm);
    color: var(--text-tertiary);
}

.hero-actions {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    position: relative;
    z-index: 1;
}

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0; /* no gap until expanded */
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-full);
    border: 1px solid rgba(255, 255, 255, 0.12);
    font-size: var(--text-sm);
    font-weight: 600;
    cursor: pointer;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast), color var(--transition-fast);
    text-decoration: none;
    background: var(--surface-subtle);
    color: var(--text-primary);
    backdrop-filter: blur(6px);
}

.btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 28px rgba(15, 23, 42, 0.24);
}

/* Accessible focus ring for keyboard users */
.btn:focus-visible {
    outline: 2px solid var(--primary-500);
    outline-offset: 2px;
}

.btn:active {
    transform: translateY(0);
    box-shadow: 0 6px 14px rgba(15, 23, 42, 0.18);
}

.btn:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.btn-primary {
    background: linear-gradient(125deg, var(--primary-500) 0%, var(--primary-600) 100%);
    color: #f8fafc;
    border-color: rgba(59, 130, 246, 0.42);
}

.btn-secondary {
    /* Make secondary buttons visibly active (not disabled-looking) */
    background: linear-gradient(128deg, #9ca3af 0%, #6b7280 100%); /* gray-400 -> gray-500 */
    color: #f8fafc;
    border-color: rgba(107, 114, 128, 0.5);
}

/* New semantic variants */
/* Ghost: minimal, for Back/Cancel/Close and low-emphasis affordances */
.btn-ghost {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--panel-border);
}
.btn-ghost:hover { background: var(--surface-soft); }

/* Neutral: subtle filled look, softer than secondary */
.btn-neutral {
    background: var(--surface-subtle);
    color: var(--text-primary);
    border-color: var(--panel-border);
}
.btn-neutral:hover { box-shadow: 0 8px 18px rgba(15, 23, 42, 0.18); }

/* Info: utility actions (Refresh/Download/Test). Mirrors current btn-control default. */
.btn-info {
    background: linear-gradient(128deg, #0ea5e9 0%, #0284c7 100%); /* sky-500 -> sky-600 */
    color: #f0f9ff;
    border-color: rgba(14, 165, 233, 0.48);
}
.btn-info:hover { box-shadow: 0 12px 28px rgba(2, 132, 199, 0.35); }

/* Outline: primary-colored outline, no fill */
.btn-outline {
    background: transparent;
    color: var(--primary-600);
    border-color: var(--primary-600);
}
.btn-outline:hover { background: rgba(37, 99, 235, 0.12); }

/* Dark theme fine-tuning for outline and ghost */
[data-theme="dark"] .btn-outline {
    color: var(--primary-400);
    border-color: var(--primary-400);
}
[data-theme="dark"] .btn-ghost:hover { background: rgba(255,255,255,0.06); }

.btn-danger {
    background: linear-gradient(128deg, #f87171 0%, #ef4444 100%);
    color: white;
    border-color: rgba(248, 113, 113, 0.45);
}

.btn-success {
    background: linear-gradient(128deg, #22c55e 0%, #16a34a 100%);
    color: white;
    border-color: rgba(34, 197, 94, 0.42);
}

/* Default look for control buttons without explicit variant (e.g., Save/Resume) */
.btn-control:not(.btn-success):not(.btn-danger):not(.btn-secondary):not(.btn-primary):not(.btn-warning):not(.btn-storm):not(.btn-info):not(.btn-neutral):not(.btn-ghost):not(.btn-outline) {
    background: linear-gradient(128deg, #0ea5e9 0%, #0284c7 100%); /* sky-500 -> sky-600 */
    color: #f0f9ff;
    border-color: rgba(14, 165, 233, 0.48);
}

.btn-control:not(.btn-success):not(.btn-danger):not(.btn-secondary):not(.btn-primary):not(.btn-warning):not(.btn-storm):not(.btn-info):not(.btn-neutral):not(.btn-ghost):not(.btn-outline):hover {
    box-shadow: 0 12px 28px rgba(2, 132, 199, 0.35);
}

/* Storm (gray) action */
.btn-storm {
    background: linear-gradient(128deg, #64748b 0%, #475569 100%); /* slate-500 -> slate-600 */
    color: #f8fafc;
    border-color: rgba(100, 116, 139, 0.45);
}

/* Warning (amber) action */
.btn-warning {
    background: linear-gradient(128deg, #f59e0b 0%, #d97706 100%); /* amber-500 -> amber-600 */
    color: #fff7ed;
    border-color: rgba(245, 158, 11, 0.45);
}

/* Removed unused .btn-ghost */

/* Reusable status pill variants (global) */
.status-pill .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.status-idle {
    background: var(--status-idle-bg);
    color: var(--status-idle-text);
    border: 1px solid var(--status-idle-border);
}

/* Stopping state pill */
.is-stopping .status-pill,
.status-pill.is-stopping {
    background: linear-gradient(128deg, #f59e0b 0%, #d97706 100%); /* amber gradient */
    color: #fff7ed;
    border: 1px solid rgba(245, 158, 11, 0.4);
}
.status-idle .dot { background: var(--status-idle-dot); }

.status-running {
    background: var(--status-running-bg);
    color: var(--status-running-text);
    border: 1px solid var(--status-running-border);
}
.status-running .dot {
    background: var(--status-running-dot);
    animation: statusPulse 1.6s ease-in-out infinite;
}

.status-error {
    background: var(--status-error-bg);
    color: var(--status-error-text);
    border: 1px solid var(--status-error-border);
}
.status-error .dot { background: var(--status-error-dot); }

.status-complete {
    background: var(--status-complete-bg);
    color: var(--status-complete-text);
    border: 1px solid var(--status-complete-border);
}
.status-complete .dot { background: var(--status-complete-dot); }

@keyframes statusPulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.35); opacity: 0.75; }
    100% { transform: scale(1); opacity: 1; }
}
@media (prefers-reduced-motion: reduce) {
    .status-running .dot { animation: none; }
}

/* Ensure inline SVG icons in buttons inherit color and render consistently */
.btn svg,
.icon-inline {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
}

.btn svg {
    stroke: currentColor;
    fill: none;
}

.btn-pill {
    padding-inline: var(--space-3);
    min-width: 104px;
}

.theme-toggle {
    width: 44px;
    height: 44px;
    border-radius: var(--radius-full);
    border: 1px solid var(--panel-border);
    background: var(--surface-soft);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
    cursor: pointer;
    transition: transform var(--transition-fast);
}

.theme-toggle:hover {
    transform: translateY(-1px);
}

.glass-card,
.card {
    position: relative;
    background: var(--panel-gradient);
    border-radius: var(--radius-lg);
    border: 1px solid var(--panel-border);
    padding: var(--space-5);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    box-shadow: var(--shadow-md);
    backdrop-filter: blur(20px);
}

/* Removed decorative top bar to simplify card visuals */

.card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-2);
}

/* Title bar variant for server info section header */
.server-title-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    margin-bottom: var(--space-2);
}

/* Right-aligned group for header badges (status + storm) */
.card-header .status-badges {
    margin-left: auto;
    display: inline-flex;
    align-items: center;
}

.card-title {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--text-primary);
}

.card-subtitle {
    font-size: var(--text-sm);
    color: var(--text-tertiary);
}

/* Standard card body region used by collapsible sections */
.card-body {
    margin-top: var(--space-3);
    padding-top: var(--space-3);
    border-top: 1px solid var(--panel-border);
}

/* Server Info header row: world image left, info content right */
.server-info-row {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: var(--space-4);
    align-items: start;
}

.world-thumb {
    width: 96px;
    height: 96px;
    border-radius: var(--radius-lg);
    border: 1px solid var(--panel-border);
    box-shadow: var(--shadow-sm);
    object-fit: cover;
    background: var(--surface-subtle);
}

@media (max-width: 480px) {
    .world-thumb { width: 72px; height: 72px; }
}

/* Alerts: contextual banners used for server errors, warnings, etc. */
.alert {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3);
    border-radius: var(--radius-lg);
    border: 1px solid var(--panel-border);
    background: var(--surface-subtle);
    box-shadow: var(--shadow-sm);
}

.alert .alert-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    color: var(--text-secondary);
}

.alert .alert-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    min-width: 0; /* allow wrapping */
}

.alert .alert-title {
    font-size: var(--text-base);
    font-weight: 700;
    line-height: 1.3;
}

.alert .alert-message {
    font-size: var(--text-sm);
    color: var(--text-primary);
    line-height: 1.5;
    word-break: break-word;
}

.alert .alert-meta {
    font-size: var(--text-xs);
    color: var(--text-tertiary);
}

/* Alert variants */
.alert-danger {
    border-color: rgba(239, 68, 68, 0.35); /* red-500 */
    background: linear-gradient(128deg, rgba(127, 29, 29, 0.18), rgba(239, 68, 68, 0.12));
}

.alert-warning {
    border-color: rgba(245, 158, 11, 0.35); /* amber-500 */
    background: linear-gradient(128deg, rgba(120, 53, 15, 0.16), rgba(245, 158, 11, 0.12));
}

.alert-success {
    border-color: rgba(34, 197, 94, 0.35); /* green-500 */
    background: linear-gradient(128deg, rgba(20, 83, 45, 0.16), rgba(34, 197, 94, 0.12));
}

.alert a { text-decoration: underline; }

/* Compact alert variant for tight spaces (e.g., server cards) */
.server-card .alert.alert-compact {
    padding: var(--space-2);
    gap: var(--space-2);
}

.server-card .alert.alert-compact .alert-title {
    font-size: var(--text-sm);
}

.server-card .alert.alert-compact .alert-message {
    font-size: var(--text-xs);
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 3; /* limit error text to 3 lines */
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.server-card .alert.alert-compact .alert-meta {
    font-size: var(--text-xs);
}

.grid-split {
    display: grid;
    /* Flexible tracks: keep a sensible minimum, allow growth to fill row */
    grid-template-columns: repeat(auto-fill, minmax(var(--server-card-width), 1fr));
    gap: var(--space-4);
    align-items: stretch;
}

/* Server card: keep a consistent footprint */
.server-card {
    height: var(--server-card-height);
    overflow: hidden;
    cursor: pointer; /* indicate click-to-navigate */
}

/* Inside server cards, controls marked to stop navigation should not show pointer */
.server-card [data-stop-navigation="true"],
.server-card [data-stop-navigation="true"] * {
    cursor: default;
}

/* Inline label/value layout inside server cards */
.server-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.server-card .server-info { flex: 1; }

.info-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
}

/* Inline info row combining multiple label/value pairs on one line */
.info-inline-row {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    white-space: nowrap;
    overflow: hidden;
}
.info-inline-row .world { flex: 1 1 auto; min-width: 0; }
.info-inline-row .port,
.info-inline-row .max { flex: 0 0 auto; }
.info-sep { color: var(--text-tertiary); }

.info-label {
    flex: 0 0 auto;
    color: var(--text-secondary);
    font-size: var(--text-base);
    font-weight: 600;
}

.info-value {
    flex: 1 1 auto;
    text-align: right;
    font-size: var(--text-sm);
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: var(--space-4);
    /* Add breathing room before the server cards grid */
    margin-bottom: var(--space-5);
}

.stat-card {
    position: relative;
    padding: var(--space-4);
    background: var(--panel-gradient);
    border-radius: var(--radius-lg);
    border: 1px solid var(--panel-border);
    box-shadow: var(--shadow-sm);
}

/* Removed decorative top bar from stat cards */

.stat-value {
    font-size: clamp(1.8rem, 3vw, 2.4rem);
    font-weight: 700;
    color: var(--primary-500);
}

.stat-label {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.pill {
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    background: var(--chip-bg);
    color: var(--chip-text);
    font-size: var(--text-xs);
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
}

/* Removed unused .status-dot container (we use only .status-dot-indicator) */

.status-dot-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--danger-500);
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.18);
}

.status-dot-indicator.running {
    background: var(--success-500);
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.18);
}

.status-dot-indicator.warning {
    background: var(--warning-500);
    box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.18);
}

/* Treat 'starting' as a warning/transition state with amber indicator */
.status-dot-indicator.starting {
    background: var(--warning-500);
    box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.18);
}

/* Paused uses the same amber treatment as warning/starting for clarity */
.status-dot-indicator.paused {
    background: var(--warning-500);
    box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.18);
}

.status-pill {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    border: 1px solid transparent;
    font-size: var(--text-xs);
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    transition: background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast);
}

.status-pill.is-running {
    background: rgba(34, 197, 94, 0.16);
    border-color: rgba(34, 197, 94, 0.26);
    color: #4ade80;
}

.status-pill.is-stopped {
    background: rgba(239, 68, 68, 0.16);
    border-color: rgba(239, 68, 68, 0.3);
    color: #fca5a5;
}

/* Paused: distinct amber tone so it's not confused with stopped */
.status-pill.is-paused {
    background: rgba(245, 158, 11, 0.16); /* amber tint */
    border-color: rgba(245, 158, 11, 0.30);
    color: #fbbf24; /* amber-400 */
}

/* Starting: brighter yellow tone distinct from paused */
.status-pill.is-starting {
    background: rgba(250, 204, 21, 0.18); /* yellow-400 tint */
    border-color: rgba(250, 204, 21, 0.32);
    color: #facc15; /* yellow-400 */
}

/* Storm status pill variants */
.status-pill.is-clear {
    background: rgba(14, 165, 233, 0.16); /* sky-500 tint */
    border-color: rgba(14, 165, 233, 0.28);
    color: #38bdf8; /* sky-400 */
}
.status-pill.is-storm {
    background: rgba(147, 51, 234, 0.16); /* purple-600 tint */
    border-color: rgba(147, 51, 234, 0.28);
    color: #a855f7; /* purple-500 */
}

/* Place multiple pills with a small gap */
.card-header .status-pill + .status-pill { margin-left: var(--space-2); }

/* Dashboard server card: render status pills as simple dots */
.server-card .card-header .status-pill {
    width: 10px;
    height: 10px;
    padding: 0;
    border: 0;
    border-radius: 50%;
    display: inline-block;
    vertical-align: middle;
    line-height: 0;
    font-size: 0; /* hide any text nodes */
}
.server-card .card-header .status-pill > * { display: none !important; }
.server-card .card-header .status-pill + .status-pill { margin-left: 6px; }

/* Make dot colors solid for visibility at small size */
.server-card .card-header .status-pill.is-running { background: var(--success-500); }
.server-card .card-header .status-pill.is-stopped { background: var(--danger-500); }
.server-card .card-header .status-pill.is-paused { background: var(--warning-500); }
.server-card .card-header .status-pill.is-starting { background: #facc15; }
.server-card .card-header .status-pill.is-clear { background: #38bdf8; }
.server-card .card-header .status-pill.is-storm { background: #a855f7; }

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--space-3);
}

.form-grid-full {
    grid-column: 1 / -1;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.form-label {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-secondary);
}

.form-control,
select,
textarea,
input[type="text"],
input[type="password"],
input[type="number"],
input[type="email"] {
    width: 100%;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    border: 1px solid var(--input-border);
    background: var(--input-surface);
    color: var(--text-primary);
    font-size: var(--text-sm);
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.form-control:focus,
select:focus,
textarea:focus,
input[type="text"]:focus,
input[type="password"]:focus,
input[type="number"]:focus,
input[type="email"]:focus {
    outline: none;
    border-color: rgba(59, 130, 246, 0.45);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.18);
}

/* Removed unused .checkbox-row styles */

.help-text {
    font-size: var(--text-xs);
    color: var(--text-tertiary);
}

/* Click-to-copy token styles */
code.token-ref {
    cursor: pointer;
    user-select: none;
    position: relative;
    transition: background-color .15s ease, color .15s ease;
}
code.token-ref:hover {
    background: rgba(59,130,246,0.12);
    color: var(--text-primary);
}
code.token-ref.copied {
    background: rgba(34,197,94,0.18);
    color: var(--success-600);
}

/* Removed unused .table-card styles */

.connection-banner {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    padding: var(--space-2) var(--space-4);
    background: linear-gradient(120deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.9));
    color: #fef2f2;
    text-align: center;
    font-weight: 600;
    display: none;
    z-index: 10000; /* ensure above headers/sidebars */
    box-shadow: var(--shadow-md);
}

.connection-banner.active {
    display: block;
}

.connection-banner button {
    margin-left: var(--space-3);
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-md);
    border: 1px solid rgba(255, 255, 255, 0.35);
    background: rgba(255, 255, 255, 0.18);
    color: inherit;
    cursor: pointer;
}

.empty-state {
    text-align: center;
    padding: var(--space-6);
    color: var(--text-tertiary);
    font-size: var(--text-sm);
}

.floating-action {
    position: fixed;
    bottom: var(--space-6);
    right: var(--space-6);
    width: 58px;
    height: 58px;
    border-radius: var(--radius-full);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: 0 var(--space-3);
    overflow: hidden;
    white-space: nowrap;
    font-size: var(--text-xl);
    background: linear-gradient(130deg, var(--primary-500) 0%, var(--primary-600) 100%);
    color: white;
    border: none;
    box-shadow: var(--shadow-md);
    cursor: pointer;
    transition: width var(--transition-fast), padding var(--transition-fast),
                box-shadow var(--transition-fast), background var(--transition-fast),
                transform var(--transition-fast);
}

/* Reveal label on hover/focus by growing into a pill and showing ::after text */
.floating-action::after {
    content: "Add Server";
    display: inline-block;
    margin-left: 0;
    font-size: var(--text-sm);
    font-weight: 700;
    letter-spacing: 0.01em;
    opacity: 0;
    transform: translateX(6px);
    max-width: 0; /* don't take layout space when hidden */
    overflow: hidden;
    transition: opacity var(--transition-fast), transform var(--transition-fast), max-width var(--transition-fast), margin var(--transition-fast);
    pointer-events: none;
}

.floating-action:hover,
.floating-action:focus-visible {
    width: 172px; /* expands into an oval pill */
    justify-content: flex-start;
    gap: var(--space-2);
    box-shadow: var(--shadow-lg);
}

.floating-action:hover::after,
.floating-action:focus-visible::after {
    opacity: 1;
    transform: translateX(0);
    max-width: 140px;
    margin-left: var(--space-2);
}

/* Removed unused .badge-trend */

.section-title {
    font-size: var(--text-xl);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-3);
}

.tab-set,
.tabs {
    display: inline-flex;
    gap: var(--space-2);
    padding: var(--space-1);
    border-radius: var(--radius-full);
    background: var(--surface-soft);
    border: 1px solid var(--panel-border);
    /* Allow server page to align tabs neatly without custom class */
    align-self: flex-start;
}

.tab-btn,
.tab {
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    border: 1px solid transparent;
    background: transparent;
    font-weight: 600;
    color: var(--text-tertiary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.tab-btn.active,
.tab.active {
    color: var(--text-primary);
    background: rgba(37, 99, 235, 0.16);
    border-color: rgba(37, 99, 235, 0.24);
}

/* Player tab variant: use a distinct green accent when active */
.tab.tab-player.active {
    background: rgba(220, 38, 38, 0.16); /* red tint */
    border-color: rgba(220, 38, 38, 0.28);
    color: var(--danger-700);
}

/* All tab variant: green accent when active */
.tab.tab-all.active {
    background: rgba(22, 163, 74, 0.16); /* green tint */
    border-color: rgba(22, 163, 74, 0.28);
    color: var(--success-700);
}

/* Indent player save rows under the player header */
#saves-list table tbody tr.player-child td:first-child {
    padding-left: var(--space-6);
}

.tab-panel {
    display: none;
    margin-top: var(--space-3);
}

.tab-panel.active {
    display: block;
}

.hidden {
    display: none !important;
}

/* Inline spinner for action buttons (shared across pages) */
.btn-spinner {
    display: inline-block;
    width: 14px;
    height: 14px;
    margin-left: 8px;
    border-radius: 50%;
    border: 2px solid rgba(99, 102, 241, 0.35);
    border-top-color: #6366f1;
    animation: btnspin 0.8s linear infinite;
    vertical-align: -2px;
}

@keyframes btnspin { to { transform: rotate(360deg); } }

/* HTMX indicator helper: show indicators during requests */
.htmx-indicator {
    display: none;
}

.htmx-request .htmx-indicator {
    display: inline-flex !important;
}

.dashboard-content {
    display: block;
}

/* Ensure inner content gutters align with hero-card padding across pages */
.dashboard-content,
.manager-content,
.server-content {
    padding-left: var(--space-6);
    padding-right: var(--space-6);
}

/* Manager page layout container */
.manager-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    width: 100%;
}

/* Server page: ensure consistent spacing between the Server Info card and the main grid */
.server-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

/* Server page layout and components migrated from inline styles */
.main-grid {
    display: grid;
    grid-template-columns: minmax(0, 1.35fr) minmax(0, 1fr); /* Players | Chat on row 1; Saves | Config on row 2 */
    gap: var(--space-4);
    width: 100%;
}
@media (max-width: 880px) {
    .main-grid { grid-template-columns: 1fr; }
}

/* Ensure control and logs cards span full width above the two-column grid */
.card-control,
#server-logs-card {
    width: 100%;
    max-width: none;
}

/* Logs card layout: left viewer, right tabs */
.logs-grid {
    display: grid;
    grid-template-columns: minmax(0, 1.6fr) minmax(220px, 0.4fr);
    gap: var(--space-3);
}

.log-viewer {
    min-height: 260px;
    max-height: 460px;
    overflow: auto;
    font-family: 'Fira Mono', monospace;
    font-size: 0.82rem;
    line-height: 1.45;
    white-space: pre-wrap;
    word-break: break-word;
    padding: var(--space-3);
    background: var(--surface-subtle);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-md);
}

/* Logs page styles (standalone logs.html) */
.logs-shell { display: flex; flex-direction: column; gap: var(--space-4); }
/* Reuse global .tabs and .tab-btn styles defined above */
.log-view { font-family: monospace; font-size: var(--text-sm); background: var(--bg-secondary); border: 1px solid var(--panel-border); border-radius: var(--radius-md); padding: var(--space-3); max-height: 70vh; overflow: auto; white-space: pre; }
.log-meta { font-size: var(--text-xs); color: var(--text-tertiary); }
.actions { display: flex; gap: var(--space-2); align-items: center; }

/* Manager: software update progress message (inline banner) */
.update-message {
    display: none;
    margin: 0;
    padding: var(--space-2) var(--space-3);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-md);
    background: var(--surface-subtle);
    color: var(--text-secondary);
    overflow-wrap: anywhere;
    word-break: break-word;
}
.update-message.active { display: block; }
.update-message.error {
    border-color: rgba(239, 68, 68, 0.35);
    background: rgba(127, 29, 29, 0.12);
    color: var(--danger-500);
}

/* Manager: async update log container */
#updating {
    max-height: 400px;
    overflow-y: auto;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--space-4);
    font-family: monospace;
    font-size: var(--text-sm);
}
#updating div { margin-bottom: var(--space-1); color: var(--text-primary); }

/* Generic table container helpers (used on Manager and elsewhere) */
.table-container { width: 100%; overflow-x: visible; }
.table-container table { width: 100%; table-layout: auto; border-collapse: collapse; }
.table-container th, .table-container td { vertical-align: top; word-break: break-word; overflow-wrap: anywhere; }
.table-container tbody tr td { padding-top: var(--space-2); padding-bottom: var(--space-2); }
.table-container tbody tr + tr td { border-top: 1px solid var(--panel-border); }
/* Allow Action column to wrap controls on small screens instead of forcing horizontal scroll */
.table-container th:nth-child(4),
.table-container td:nth-child(4) { width: auto; white-space: normal; }
.table-container td:nth-child(4) { display: flex; flex-wrap: wrap; gap: var(--space-2); align-items: center; }
/* Allow long titles and progress text to wrap within first column */
.component-title, .progress-text { overflow-wrap: anywhere; word-break: break-word; }

/* Manager page grid layout: Configuration + Software cards */
.manager-grid { display: grid; grid-template-columns: 1fr; gap: var(--space-4); }
.manager-grid > * { min-width: 0; }
@media (min-width: 900px) { .manager-grid { grid-template-columns: 0.9fr 1.1fr; } }
@media (min-width: 1280px) { .manager-grid { grid-template-columns: 0.85fr 1.15fr; } }

/* Manager configuration form layout */
.config-form .form-group {
    display: grid;
    grid-template-columns: minmax(110px, 160px) 1fr;
    align-items: center;
    gap: var(--space-2);
    min-width: 0;
}
.config-form .form-group.top-align { align-items: start; }
.config-form .form-group.top-align label { padding-top: 2px; }
.config-form .form-group label { margin: 0; color: var(--text-secondary); font-weight: 600; }
.config-form .form-group input[type="text"],
.config-form .form-group input[type="number"],
.config-form .form-group select { width: 100%; }
.config-form .form-group > * { min-width: 0; }
.config-form .form-group input[type="checkbox"] { justify-self: start; width: 18px; height: 18px; }
.form-checkbox { width: 18px; height: 18px; flex-shrink: 0; }
/* Subtle vertical spacing between successive configuration rows */
.config-form .form-group + .form-group { margin-top: var(--space-2); }
.config-form .form-row-full { grid-template-columns: minmax(110px, 160px) 1fr; margin-top: var(--space-4); }
.config-form .form-row-full > * { grid-column: 1 / -1; justify-self: end; width: auto; }

/* Field inline helpers */
.field-inline { display: inline-flex; align-items: center; gap: var(--space-1); }
.field-inline.items-start { align-items: flex-start; }
.inline-controls { display: inline-flex; align-items: center; gap: var(--space-2); flex-wrap: nowrap; overflow-x: auto; }
.field-inline label { margin: 0; }
/* Specific widths for user add row controls */
#um_new_username.form-input-inline { width: 180px; min-width: 160px; }
#um_new_password.form-input-inline { width: 200px; min-width: 160px; }
#um_new_role.form-input-inline { width: 140px; min-width: 120px; }
.lang-select { flex: 0 0 160px; width: 160px; max-width: 200px; }
.source-select { flex: 1 1 260px; min-width: 220px; }
@media (max-width: 640px) {
    .inline-controls { flex-wrap: wrap; overflow-x: visible; }
    .lang-select, .source-select { flex: 1 1 100%; width: 100%; max-width: none; }
    .config-form .form-group { grid-template-columns: 1fr; align-items: start; }
    .config-form .form-group label { margin-bottom: var(--space-1); }
}

.log-tabs {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-height: 460px;
    overflow: auto;
}

.log-tab {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    border: 1px solid var(--panel-border);
    background: var(--surface-soft);
    color: var(--text-primary);
    cursor: pointer;
    font-size: var(--text-sm);
}

.log-tab[aria-selected="true"] {
    background: rgba(37, 99, 235, 0.16);
    border-color: rgba(37, 99, 235, 0.24);
}

.log-tab .filename {
    overflow: hidden;
    text-overflow: ellipsis;
}

.control-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.control-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-2);
}

.control-row label {
    min-width: 90px;
    font-weight: 600;
    color: var(--text-secondary);
}

.button-group {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}
/* Button group modifiers for consistent layout tweaks */
.button-group.centered { justify-content: center; }
.button-group.gap-3 { gap: var(--space-3); }
.button-group.mt-4 { margin-top: var(--space-4); }

/* Prevent multi-line button labels that create uneven heights */
.button-group .btn { white-space: nowrap; }

.btn-control { min-width: var(--btn-w-md); padding-inline: var(--space-3); }

/* Split-button (global styling for paired main button + caret) */
.split-button {
    display: inline-block;
    position: relative;
    vertical-align: middle;
    border-radius: var(--radius-full);
    /* Keep outer-right rounding visible for the caret half */
    overflow: visible;
}
.button-group .split-button { margin: 0; }
/* Inner halves meet flush; restore only the outer corners */
.split-button > .btn { margin: 0; border-radius: 0 !important; box-shadow: none; }
/* Ensure split-button halves match other control button heights in control cards */
.card-control .button-group .btn-control,
.card-control .split-button > .btn { min-height: 36px; }
/* Round the main (left) outer corners and make room for the caret overlay */
.split-button > .btn:first-child {
    border-top-left-radius: var(--radius-full) !important;
    border-bottom-left-radius: var(--radius-full) !important;
    border-right: 0;
    padding-right: calc(var(--space-4) + 38px);
}
/* Round the caret (right) outer corners */
.split-button > .btn:last-of-type {
    border-top-right-radius: var(--radius-full) !important;
    border-bottom-right-radius: var(--radius-full) !important;
}
/* Also round when using adjacent sibling syntax to be resilient to DOM changes */
.split-button > .btn + .btn {
    border-top-right-radius: var(--radius-full) !important;
    border-bottom-right-radius: var(--radius-full) !important;
}
/* Caret button is overlaid on the right; maintain a subtle divider */
.split-button > .btn.btn-split-caret {
    position: absolute; right: 0; top: 0; bottom: 0; z-index: 2;
    width: 38px; min-width: 38px !important; padding-left: 0; padding-right: 0;
    display: inline-flex; align-items: center; justify-content: center;
    border-left: 1px solid var(--border-color) !important;
    border-top-right-radius: var(--radius-full) !important;
    border-bottom-right-radius: var(--radius-full) !important;
    background-clip: padding-box;
}
/* Defensive rounding: some cascade paths may still flatten the caretâ€™s outer edge */
#save-split .btn.btn-split-caret { border-top-right-radius: var(--radius-full) !important; border-bottom-right-radius: var(--radius-full) !important; }
/* Match divider to primary tone when the group uses a primary variant */
.split-button > .btn.btn-primary.btn-split-caret { border-left-color: rgba(59, 130, 246, 0.42) !important; }
/* Prevent hover lift that visually splits the halves */
.split-button > .btn:hover,
.split-button > .btn:focus { transform: none !important; box-shadow: none !important; }
.split-button .btn-split-caret svg { pointer-events: none; }
/* When caret half is disabled/hidden by state, round the main button's right edge too */
.split-button.is-disabled > .btn:first-child {
    border-top-right-radius: var(--radius-full) !important;
    border-bottom-right-radius: var(--radius-full) !important;
}
/* Dim caret when disabled via group state or attribute parity */
.split-button.is-disabled > .btn.btn-split-caret { opacity: 0.55; pointer-events: none; }
.split-button > .btn[disabled] ~ .btn.btn-split-caret { opacity: 0.55; pointer-events: none; }

/* Right-justify action buttons within Server Control footer */
.control-actions {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
}

/* Removed unused .control-sep */

/* Generic button utilities replacing server-specific size classes */
/* Removed unused .btn-compact, .btn-min-xs, and .btn-min-md */
.btn-min-sm { min-width: var(--btn-w-sm); }
.btn-min-lg { min-width: var(--btn-w-lg); }

/* Icon-only buttons: minimal square footprint sized to the icon */
.btn-icon {
    width: 28px;
    height: 28px;
    min-width: 28px;
    padding: 0;
    border-radius: var(--radius-full);
}

/* Ultra-compact navigation buttons (Prev/Next server) */
/* Slightly larger than .btn-icon for accessibility (32px tap target) */
.btn-nav {
    width: 32px;
    height: 32px;
    min-width: 32px;
    padding: 0;
    border-radius: var(--radius-full);
    line-height: 32px; /* vertically center glyph if text-based */
    font-size: var(--text-sm);
    font-weight: 600;
}
/* Ensure SVG inside keeps consistent sizing */
.btn-nav svg { width: 16px; height: 16px; }

/* Global modal styles (confirm/prompt/info) */
.confirm-modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(2, 6, 23, 0.65); z-index: 10000; backdrop-filter: blur(10px); }
.confirm-modal.active { display: flex; }
.confirm-modal .modal-card { max-width: 520px; width: 92%; background: var(--panel-gradient); color: var(--text-primary); border: 1px solid var(--panel-border); border-radius: var(--radius-xl); box-shadow: var(--shadow-lg); }
.confirm-modal .modal-header { padding: 16px 20px; border-bottom: 1px solid var(--panel-border); display: flex; align-items: center; gap: 10px; }
.confirm-modal .modal-header .icon { width: 20px; height: 20px; color: var(--danger-500); display: inline-flex; align-items: center; justify-content: center; }
.confirm-modal .modal-title { font-size: var(--text-base); font-weight: 700; margin: 0; }
.confirm-modal .modal-body { padding: 16px 20px; line-height: 1.5; }
.confirm-modal .modal-actions { padding: 16px 20px; border-top: 1px solid var(--panel-border); display: flex; gap: 10px; justify-content: flex-end; }
.confirm-modal .modal-close { margin-left: auto; background: transparent; border: none; color: var(--text-tertiary); font-size: 20px; line-height: 1; cursor: pointer; }
/* Ghost danger button variant for modal secondary destructive actions */
.btn-danger-ghost { background: transparent; border: 1px solid var(--danger-500); color: var(--danger-500); }

.status-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--surface-subtle);
    border-radius: var(--radius-md);
    border: 1px solid var(--panel-border);
}

.status-row {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    font-size: var(--text-sm);
}

.status-label {
    font-weight: 600;
    color: var(--text-tertiary);
}

.update-progress {
    display: none;
    flex-direction: column;
    gap: var(--space-2);
    margin-top: var(--space-2);
    padding: var(--space-3);
    background: var(--surface-soft);
    border-radius: var(--radius-md);
    border: 1px solid var(--panel-border);
}

.update-progress.active { display: flex; }

/* Compact inline variant for placement next to Update button */
.update-progress.compact {
    display: none; /* remains hidden until .active */
    flex-direction: row;
    align-items: center;
    gap: var(--space-2);
    margin: 0; /* remove top margin inside button row */
    padding: 0; /* no inner padding inline */
    background: transparent;
    border: none;
}
.update-progress.compact.active { display: inline-flex; }
.update-progress.compact .update-progress-bar { width: 120px; height: 6px; background: var(--surface-subtle); }
.update-progress.compact .update-progress-text { font-size: var(--text-xs); color: var(--text-tertiary); }

.update-progress-bar {
    width: 100%;
    height: 8px;
    background: var(--surface-subtle);
    border-radius: var(--radius-full);
    overflow: hidden;
}

/* Small inline badge indicating server files are out of sync with manager components */
.update-needed-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: var(--radius-full);
    background: rgba(245, 158, 11, 0.16); /* amber tint */
    border: 1px solid rgba(245, 158, 11, 0.32);
    color: var(--warning-500);
    font-size: var(--text-xs);
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    white-space: nowrap;
}

.update-progress-fill {
    width: 0%;
    height: 100%;
    background: linear-gradient(120deg, rgba(37, 99, 235, 0.95), rgba(147, 51, 234, 0.95));
    transition: width 0.25s ease;
}

.update-progress-text {
    font-size: var(--text-xs);
    color: var(--text-tertiary);
    letter-spacing: 0.05em;
}

.update-progress.error {
    border-color: rgba(239, 68, 68, 0.35);
    background: rgba(127, 29, 29, 0.2);
}

.update-progress.error .update-progress-fill { background: #ef4444; }
.update-progress.error .update-progress-text { color: #fecaca; }

.log-preview {
    display: flex;
    gap: var(--space-2);
    align-items: center;
    padding: var(--space-3);
    background: var(--surface-subtle);
    border-radius: var(--radius-md);
    border: 1px solid var(--panel-border);
}

.log-line {
    flex: 1;
    font-family: 'Fira Mono', monospace;
    font-size: 0.76rem;
    color: var(--text-tertiary);
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.players-section {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

/* Server tabs now reuse the shared tab styles via combined selectors above */

.players-table thead th {
    text-align: left;
    padding: var(--space-2);
    border-bottom: 1px solid rgba(148, 163, 184, 0.2);
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

.players-table tbody td {
    padding: var(--space-2);
    border-bottom: 1px solid rgba(148, 163, 184, 0.14);
    font-size: var(--text-sm);
    color: var(--text-primary);
}

.players-table tbody tr:hover { background: rgba(37, 99, 235, 0.08); }

.player-name { display: inline-flex; align-items: center; gap: var(--space-2); }
.player-admin-icon {
    padding: 0.2rem 0.45rem;
    border-radius: var(--radius-full);
    background: rgba(37, 99, 235, 0.22);
    color: rgba(219, 234, 254, 0.95);
    font-size: 0.8rem;
    font-weight: 700;
}

/* Banned row highlighting for History tab */
.row-banned {
    background: rgba(239, 68, 68, 0.10);
    border-left: 3px solid var(--danger-500);
}
.row-banned:hover { background: rgba(239, 68, 68, 0.16); }

.player-banned-icon {
    color: var(--danger-500);
}

.chat-section { display: flex; flex-direction: column; gap: var(--space-3); }
.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-3);
    background: var(--surface-subtle);
    border-radius: var(--radius-md);
    border: 1px solid var(--panel-border);
    max-height: 320px;
}
.chat-message { display: flex; gap: var(--space-2); margin-bottom: var(--space-2); font-size: var(--text-sm); color: var(--text-primary); }
.chat-time { color: var(--text-tertiary); min-width: 48px; font-family: 'Fira Mono', monospace; }
.chat-player { color: var(--text-secondary); font-weight: 600; }
.chat-input-form { display: flex; gap: var(--space-2); }
.chat-input {
    flex: 1;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-full);
    border: 1px solid var(--input-border);
    background: var(--input-surface);
    color: var(--text-primary);
    font-size: var(--text-sm);
}
.chat-input:focus { outline: none; border-color: rgba(59, 130, 246, 0.45); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.18); }

/* Dashboard server version icons (next to name) */
.server-card .server-name .icon-release { color: var(--success-500); }
.server-card .server-name .icon-beta { color: var(--primary-500); }

/* Server page: show same version icon next to server name */
.server-title {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
}
.server-title .icon-release { color: var(--success-500); }
.server-title .icon-beta { color: var(--primary-500); }

/* Utility classes: minimal, reusable layout helpers */
.row { display: flex; align-items: center; gap: var(--space-2); }
.flex-col { display: flex; flex-direction: column; }
.items-end { align-items: flex-end; }
.items-start { align-items: flex-start; }
.justify-between { justify-content: space-between; }
.relative { position: relative; }
.w-full { width: 100%; }
.inline-flex { display: inline-flex; }
.ml-auto { margin-left: auto; }
.wrap { flex-wrap: wrap; }
/* Top separator block with spacing */
.sep-top { margin-top: var(--space-3); padding-top: var(--space-3); border-top: 1px solid var(--border-color); }

/* Spacing utilities */
.mt-3 { margin-top: var(--space-3); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }
/* Minor spacing utility for 6px left margin (used for icon-label offsets) */
.ml-6 { margin-left: 6px; }
/* Build meta timestamp styling */
.build-meta { font-size: 0.7rem; color: var(--text-tertiary); margin-top: 4px; }
/* Margin/spacing fine-grain utilities */
.m-0 { margin: 0; }
.mb-2 { margin-bottom: var(--space-2); }
.mt-2 { margin-top: var(--space-2); }
.mt-4 { margin-top: var(--space-4); }
.ml-3 { margin-left: var(--space-3); }
/* Width utilities */
.w-120 { width:120px; }
.min-w-120 { min-width:120px; }
.w-340 { width:340px; }
.max-w-820 { max-width:820px; }
/* Text/whitespace helpers */
.nowrap { white-space: nowrap; }
.justify-center { justify-content: center; }
/* Manager assignment chooser dropdown uses generic .dropdown-panel combined with .glass-card for visuals */
/* User assignment list container */
.assign-list { display:flex; flex-wrap:wrap; gap: var(--space-2); max-height:240px; overflow:auto; padding: var(--space-1); border:1px dashed var(--border-color); border-radius: var(--radius-md); }
/* User assignment chip */
.assign-chip { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border:1px solid var(--border-color); border-radius:8px; font-size: var(--text-sm); background: var(--surface-soft); }
/* Assignment panel table cell */
.assign-panel-cell { background: var(--bg-tertiary); border-top:1px solid var(--border-color); padding:12px 16px; }
/* Progress stage list (setup page) */
.progress-stage { display:flex; align-items:center; gap:12px; margin-bottom: var(--space-2); }
.progress-icon { width:20px; text-align:center; }
.progress-stage-header { display:flex; justify-content:space-between; font-size:13px; color: var(--text-secondary); }
.progress-stage-bar { height:6px; background: var(--surface-soft); border-radius:6px; overflow:hidden; margin-top:6px; }
.progress-stage-fill { height:100%; background: linear-gradient(120deg, rgba(37, 99, 235, 0.95), rgba(147, 51, 234, 0.95)); transition: width 0.3s ease; }
/* Additional global utilities used across templates */
.flex { display: flex; }
.items-center { align-items: center; }
.gap-2 { gap: var(--space-2); }
.gap-3 { gap: var(--space-3); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.rounded-md { border-radius: var(--radius-md); }
.bg-surface-secondary { background: var(--surface-secondary); }
.bg-surface-tertiary { background: var(--surface-tertiary); }
.border { border: 1px solid var(--border-color); }
.border-dashed { border-style: dashed; }
.mt-0 { margin-top: 0; }
.pl-5 { padding-left: var(--space-5); }
.text-secondary { color: var(--text-secondary); }
.text-primary { color: var(--text-primary); }
.text-sm { font-size: var(--text-sm); }
.text-2xs { font-size: 0.7rem; }
.text-xs { font-size: var(--text-xs); }
.text-0_9 { font-size: 0.9rem; }
.w-0 { width: 0%; }
.w-160 { width: 160px; min-width: 160px; }
.ml-2 { margin-left: var(--space-2); }
.ml-4 { margin-left: var(--space-4); }
.inline { display: inline; }
/* flex grow utility */
/* Single flex grow utility */
.flex-1 { flex: 1 1 auto; }
.display-contents { display: contents; }
.cursor-pointer { cursor: pointer; }
.justify-end { justify-content: flex-end; }
.w-140 { width:140px; }
.mx-auto { margin-left: auto; margin-right: auto; }
.mb-1 { margin-bottom: var(--space-1); }
.border-t { border-top: 1px solid var(--border-color); }
.fw-600 { font-weight: 600; }
.text-tertiary { color: var(--text-tertiary); }
.bg-surface-subtle { background: var(--surface-subtle); }

/* Users page layout helper */
.users-create-grid { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 8px; align-items: end; }

/* Additional spacing utilities for legal/reference pages */
.mt-6 { margin-top: var(--space-6); }
.mb-6 { margin-bottom: var(--space-6); }
.pt-6 { padding-top: var(--space-6); }
.pb-10 { padding-bottom: var(--space-10); }

/* Max-width helpers */
.max-w-900 { max-width: 900px; }
.max-w-520 { max-width: 520px; }

/* Text utilities */
.text-center { text-align: center; }
.opacity-90 { opacity: .9; }
.white-pre-wrap { white-space: pre-wrap; }

/* Simple card padding variant */
.card-pad-6 { padding: var(--space-6); }

/* List and code block styles for token/reference pages */
.token-list { margin-top: var(--space-3); }
.code-block { margin-top: var(--space-3); background: var(--surface); border:1px solid var(--border-color); border-radius: var(--radius-md); padding: var(--space-4); font-size: var(--text-sm); }
.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }


/* Grid helpers */
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2); }
.grid-items-end { align-items: end; }
.grid-items-center { align-items: center; }

.form-grid-compact { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-3); }
.form-row { display: grid; grid-template-columns: 120px minmax(0, 1fr); align-items: center; gap: var(--space-2); font-size: var(--text-sm); }
.form-row-160 { grid-template-columns: 160px minmax(0, 1fr); }
.form-row-one { grid-template-columns: 1fr; justify-items: end; }
.form-row label { font-weight: 600; color: var(--text-tertiary); }
.form-row-full { grid-column: 1 / -1; }
.form-input-inline,
.form-select-inline {
    padding: var(--space-2);
    border-radius: var(--radius-md);
    border: 1px solid var(--input-border);
    background: var(--input-surface);
    color: var(--text-primary);
    font-size: var(--text-sm);
}
.form-inline { display: flex; align-items: center; gap: var(--space-2); flex-wrap: wrap; }
.form-inline .form-input-inline { width: auto; }
.sr-only { position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 1px, 1px); white-space: nowrap; border: 0; }
.form-input-inline:focus,
.form-select-inline:focus { outline: none; border-color: rgba(59, 130, 246, 0.45); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.18); }
.readonly-field { padding: var(--space-2); color: var(--text-secondary); font-size: var(--text-sm); }
.radio-group, .checkbox-inline { display: flex; align-items: center; gap: var(--space-2); }
.radio-label { display: inline-flex; align-items: center; gap: var(--space-2); font-weight: 500; cursor: pointer; }
.update-button-container { display: flex; justify-content: flex-end; }

.log-popup {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(2, 6, 23, 0.65);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}
.log-popup.active { display: flex; }
.log-popup-content {
    background: var(--panel-gradient);
    border-radius: var(--radius-xl);
    border: 1px solid var(--panel-border);
    padding: var(--space-6);
    width: min(1000px, 92vw);
    max-height: 82vh;
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    box-shadow: var(--shadow-lg);
}
.log-popup-header { display: flex; align-items: center; justify-content: space-between; }
.log-popup-title { font-size: var(--text-xl); font-weight: 600; }
.log-popup-body {
    flex: 1;
    overflow-y: auto;
    background: var(--surface-subtle);
    border-radius: var(--radius-lg);
    border: 1px solid var(--panel-border);
    padding: var(--space-4);
    font-family: 'Fira Mono', monospace;
    font-size: 0.78rem;
    line-height: 1.6;
    color: var(--text-secondary);
}

@media (max-width: 1200px) {
    .main-grid { grid-template-columns: 1fr; }
}

@media (max-width: 720px) {
    .form-grid-compact { grid-template-columns: 1fr; }
    .form-row { grid-template-columns: 1fr; }
    .form-row label { font-weight: 600; }
}

/* Profile page helpers */
.profile-form { max-width: 520px; }
.hint { font-size: var(--text-sm); margin-top: 4px; }
.hint.ok { color: var(--success-500); }
.hint.bad { color: var(--danger-500); }

/* Error page layout */
.error-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: var(--space-4); }
.error-card { background: var(--bg-secondary); border-radius: var(--radius-2xl); box-shadow: var(--shadow-xl); padding: var(--space-8); text-align: center; max-width: 500px; width: 100%; }
.error-icon { font-size: 4rem; margin-bottom: var(--space-4); color: var(--danger-500); }
.error-title { font-size: var(--text-2xl); font-weight: 700; color: var(--text-primary); margin-bottom: var(--space-2); }
.error-message { color: var(--text-secondary); margin-bottom: var(--space-6); line-height: 1.6; }
.error-actions { display: flex; gap: var(--space-4); justify-content: center; flex-wrap: wrap; }
/* Admin setup page adjustments */
.setup-center { min-height: 100vh; display: flex; align-items: center; justify-content: center; background: var(--surface-100); padding: var(--space-6); }
/* Scope setup-specific card visuals to setup container only to avoid overriding global .card */
.setup-center .card { background: var(--surface-0); border: 1px solid var(--border-color); border-radius: var(--radius-2xl); padding: var(--space-6); width: 100%; max-width: 480px; box-shadow: var(--shadow-lg); }
.title { font-size: var(--text-2xl); font-weight: 700; margin-bottom: var(--space-2); }
.subtitle { color: var(--text-secondary); margin-bottom: var(--space-6); }
.error { background: rgba(239, 68, 68, 0.12); color: var(--danger-500); border: 1px solid rgba(239, 68, 68, 0.25); padding: var(--space-3); border-radius: var(--radius-md); margin-bottom: var(--space-4); }
.hint { color: var(--text-secondary); font-size: var(--text-sm); margin-top: var(--space-2); }

/* Frame layout (app shell with sidebar + iframe) */
.frame-shell { margin: 0; padding: 0; font-family: 'Inter', system-ui, -apple-system, sans-serif; background: var(--page-background); overflow: hidden; height: 100vh; display: flex; }
.sidebar { width: 280px; background: var(--panel-gradient); border-right: 1px solid var(--panel-border); display: flex; flex-direction: column; backdrop-filter: blur(24px); box-shadow: var(--shadow-md); z-index: 100; }
.sidebar-header { padding: var(--space-6) var(--space-5); border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: var(--space-3); }
.sidebar-logo { width: 48px; height: 48px; border-radius: var(--radius-lg); object-fit: contain; background: rgba(99, 102, 241, 0.08); padding: var(--space-2); }
.sidebar-title { flex: 1; }
.sidebar-title h1 { font-size: var(--text-lg); font-weight: 700; margin: 0; color: var(--text-primary); }
.sidebar-title p { font-size: var(--text-xs); color: var(--text-tertiary); margin: 0; margin-top: 2px; }
.nav-section { padding: var(--space-4) var(--space-3); }
.nav-section-title { font-size: var(--text-xs); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-tertiary); padding: 0 var(--space-3); margin-bottom: var(--space-2); }
.nav-item { display: flex; align-items: center; gap: var(--space-3); padding: var(--space-3) var(--space-3); border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); color: var(--text-secondary); text-decoration: none; font-size: var(--text-sm); font-weight: 500; margin-bottom: var(--space-1); }
.nav-item:hover { background: var(--surface-soft); color: var(--text-primary); }
.nav-item.active { background: linear-gradient(120deg, rgba(99, 102, 241, 0.18), rgba(147, 51, 234, 0.12)); color: var(--primary-600); box-shadow: 0 2px 8px rgba(99, 102, 241, 0.18); }
.nav-icon { width: 20px; height: 20px; flex-shrink: 0; }
.nav-badge { margin-left: auto; background: var(--chip-bg); color: var(--chip-text); font-size: var(--text-xs); font-weight: 600; padding: 2px var(--space-2); border-radius: var(--radius-full); min-width: 20px; text-align: center; }
.nav-servers { flex: 1; overflow-y: auto; padding: var(--space-2) var(--space-3); }
.sidebar-footer { padding: var(--space-4) var(--space-3); border-top: 1px solid var(--border-color); display: flex; flex-direction: column; gap: var(--space-2); }
.theme-toggle-btn { display: flex; align-items: center; gap: var(--space-2); padding: var(--space-2) var(--space-3); border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-secondary); color: var(--text-secondary); font-size: var(--text-sm); cursor: pointer; transition: all var(--transition-fast); }
.theme-toggle-btn:hover { background: var(--surface-soft); border-color: var(--input-border); }
.main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.topbar { background: var(--panel-gradient); border-bottom: 1px solid var(--panel-border); padding: var(--space-4) var(--space-6); display: flex; align-items: center; justify-content: space-between; backdrop-filter: blur(24px); box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08); }
.topbar-left { display: flex; align-items: center; gap: var(--space-3); }
.page-title { font-size: var(--text-xl); font-weight: 700; color: var(--text-primary); margin: 0; }
.datetime-display { font-size: var(--text-sm); color: var(--text-tertiary); font-variant-numeric: tabular-nums; }
.content-frame { flex: 1; border: none; width: 100%; height: 100%; background: transparent; }
.connection-banner { position: fixed; top: 0; left: 0; right: 0; display: none; align-items: center; justify-content: center; gap: var(--space-3); padding: var(--space-3) var(--space-5); background: rgba(239, 68, 68, 0.95); color: #ffffff; font-weight: 600; font-size: var(--text-sm); z-index: 10000; box-shadow: var(--shadow-lg); backdrop-filter: blur(8px); }
.connection-banner.active { display: flex; }
.connection-banner button { padding: var(--space-1) var(--space-3); border: 1px solid rgba(255, 255, 255, 0.55); border-radius: var(--radius-md); background: rgba(255, 255, 255, 0.18); color: #ffffff; font-size: var(--text-sm); font-weight: 600; cursor: pointer; transition: background 0.2s ease; }
.connection-banner button:hover { background: rgba(255, 255, 255, 0.32); }
@media (max-width: 768px) {
    .sidebar { width: 240px; }
    .topbar { padding: var(--space-3) var(--space-4); }
}

/* Setup page */
.setup-modal { background: var(--bg-primary); border-radius: var(--radius-xl); padding: var(--space-6); max-width: 960px; width: 100%; box-shadow: var(--shadow-md); border: 1px solid var(--panel-border); }
.setup-header { text-align: center; margin-bottom: var(--space-6); }
.setup-icon { width: 64px; height: 64px; margin: 0 auto var(--space-4); background: var(--surface-subtle); border: 1px solid var(--panel-border); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 32px; color: var(--text-secondary); }
.setup-header h1 { font-size: 24px; font-weight: 700; color: var(--text-primary); margin-bottom: var(--space-2); }
.build-marker { display: inline-block; margin-left: 8px; font-size: 11px; font-weight: 700; color: var(--chip-text); background: var(--chip-bg); border: 1px solid var(--panel-border); padding: 2px 6px; border-radius: 999px; vertical-align: middle; }
.setup-header p { color: var(--text-tertiary); font-size: 14px; }
.error-box { background: rgba(239, 68, 68, 0.12); border-left: 4px solid var(--danger-500); padding: var(--space-4); border-radius: 8px; margin-bottom: var(--space-6); display: none; border: 1px solid var(--panel-border); }
.error-box.active { display: block; }
.error-box h3 { font-size: 16px; font-weight: 600; color: var(--danger-500); margin-bottom: var(--space-3); }
.error-box ul { list-style: none; margin: 0; padding: 0; }
.error-box li { padding: var(--space-2) 0; color: var(--text-primary); display: flex; align-items: center; gap: var(--space-2); }
.error-box li:before { content: "â›”"; font-size: 16px; }
.error-hint { margin-top: var(--space-3); font-size: 13px; color: var(--text-tertiary); }
.info-box { background: var(--surface-subtle); border-left: 4px solid var(--primary-500); padding: var(--space-4); border-radius: 8px; margin-bottom: var(--space-6); border: 1px solid var(--panel-border); color: var(--text-secondary); font-size: 14px; }
.info-box strong { color: var(--text-primary); }
.instructions { background: var(--surface-subtle); padding: var(--space-4); border-radius: 8px; margin-bottom: var(--space-6); border: 1px solid var(--panel-border); }
.instructions h3 { font-size: 14px; font-weight: 600; color: var(--text-secondary); margin-bottom: var(--space-3); }
.instructions ol { margin-left: 0; padding-left: 0; list-style: none; color: var(--text-primary); font-size: 13px; line-height: 1.6; }
.step-badge { display: inline-block; min-width: 54px; padding: 0 8px; margin-right: 6px; margin-top: 1px; border: 1px solid var(--panel-border); border-radius: 999px; background: var(--surface-subtle); color: var(--text-secondary); font-weight: 600; font-size: 11px; text-align: center; }
#install-list li { display: flex; align-items: flex-start; gap: 8px; }
.instructions li { margin-bottom: var(--space-2); }
.instructions code { background: var(--input-surface); padding: 2px 8px; border-radius: 4px; font-family: 'Monaco', 'Courier New', monospace; color: var(--text-primary); font-size: 12px; border: 1px solid var(--input-border); }
.instructions a { color: var(--primary-600); text-decoration: none; }
.instructions a:hover { text-decoration: underline; }
.progress-container { display: none; margin-bottom: var(--space-6); padding: var(--space-4); background: var(--surface-subtle); border-radius: 8px; border: 1px solid var(--panel-border); }
.progress-container.active { display: block; }
.progress-text { color: var(--text-secondary); font-size: 14px; margin-bottom: var(--space-3); text-align: center; font-weight: 600; }
.progress-bar { width: 100%; height: 10px; background: var(--surface-soft); border-radius: 10px; overflow: hidden; }
.progress-fill { height: 100%; background: linear-gradient(120deg, rgba(37, 99, 235, 0.95), rgba(147, 51, 234, 0.95)); width: 0%; transition: width 0.3s ease; border-radius: 10px; }
.action-buttons { display: flex; gap: var(--space-3); justify-content: flex-end; }
.btn-setup { background: linear-gradient(125deg, var(--primary-500) 0%, var(--primary-600) 100%); color: #f8fafc; border: 1px solid rgba(59, 130, 246, 0.42); box-shadow: var(--shadow-sm); }
.btn-setup:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 12px 28px rgba(59, 130, 246, 0.28); }
.btn-setup:disabled { background: var(--bg-tertiary); color: var(--text-tertiary); cursor: not-allowed; box-shadow: none; }
[data-theme="dark"] .setup-header h1 { color: #f7fafc; }
[data-theme="dark"] .build-marker { color: #c3dafe; background: rgba(99, 102, 241, 0.15); border-color: rgba(129, 140, 248, 0.5); }
[data-theme="dark"] .setup-header p { color: #cbd5e0; }
[data-theme="dark"] .instructions { background: #1a202c; border-color: #4a5568; }
[data-theme="dark"] .instructions h3 { color: #e2e8f0; }
[data-theme="dark"] .instructions ol { color: #cbd5e0; }
[data-theme="dark"] .instructions code { background: #4a5568; color: #e2e8f0; }
[data-theme="dark"] .progress-container { background: #1a202c; border-color: #4a5568; }
[data-theme="dark"] .progress-text { color: #cbd5e0; }
[data-theme="dark"] .progress-bar { background: #4a5568; }
[data-theme="dark"] .btn-secondary {
    /* Restore a visible gradient variant for dark mode instead of a flat background */
    background: linear-gradient(128deg, #64748b 0%, #475569 100%); /* slate-500 -> slate-600 */
    color: #f8fafc;
    border-color: rgba(100, 116, 139, 0.45);
}
[data-theme="dark"] .btn-secondary:hover:not(:disabled) {
    box-shadow: 0 12px 28px rgba(100, 116, 139, 0.32);
}
[data-theme="dark"] .error-box { background: rgba(239, 68, 68, 0.15); border-color: #f87171; }
[data-theme="dark"] .error-box h3,
[data-theme="dark"] .error-box li,
[data-theme="dark"] .error-hint { color: #fecaca; }
[data-theme="dark"] .info-box { background: #1a202c; border-color: #4a5568; }

/* Commands reference page */
.commands-search { min-width: 280px; padding: 10px 14px; border: 1px solid var(--input-border); background: var(--input-surface); color: var(--text-primary); border-radius: 8px; font-size: 14px; }
.commands-search:focus { outline: none; border-color: var(--primary-600); box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.25); }
.filter-info { font-size: 12px; color: var(--text-tertiary); margin: 16px 2px 8px; }
.table-shell { border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; background: var(--bg-primary); box-shadow: var(--shadow-sm); }
.commands-table { width: 100%; border-collapse: separate; border-spacing: 0; table-layout: fixed; font-size: 13px; }
.commands-table thead th { position: sticky; top: 0; background: linear-gradient(120deg, var(--bg-primary), #222b37); color: var(--text-primary); font-weight: 600; text-align: left; padding: 10px 12px; border-bottom: 1px solid var(--border-color); font-size: 12px; letter-spacing: .05em; text-transform: uppercase; }
.commands-table tbody td { vertical-align: top; padding: 10px 12px; border-bottom: 1px solid var(--border-color); color: var(--text-secondary); word-break: break-word; }
.commands-table tbody tr:last-child td { border-bottom: none; }
.commands-table tbody tr { transition: background .15s ease; }
.commands-table tbody tr:hover { background: rgba(99, 102, 241, 0.08); }
.cmd-name { font-family: monospace; font-weight: 600; font-size: 12px; background: var(--bg-secondary); display: inline-block; padding: 4px 8px; border-radius: 6px; color: var(--text-primary); box-shadow: inset 0 0 0 1px var(--border-color); cursor: pointer; }
.cmd-name:focus { outline: 2px solid var(--primary-500); outline-offset: 2px; }
.usage-badge { display: inline-block; background: var(--chip-bg); color: var(--chip-text); padding: 3px 8px; border-radius: 6px; font-size: 11px; margin: 3px 5px 5px 0; font-family: monospace; box-shadow: inset 0 0 0 1px var(--border-color); }
.empty-usage { color: var(--text-tertiary); font-style: italic; }
.description-block { white-space: pre-line; line-height: 1.4; font-size: 12.5px; max-height: 4.5em; overflow: hidden; position: relative; }
.description-block.expanded { max-height: none; }
.desc-toggle { display: inline-block; margin-top: 6px; font-size: 12px; color: var(--primary-500); cursor: pointer; }
.highlight { background: var(--primary-600); color: #fff; }
.az-bar { margin-top: 16px; display: flex; flex-wrap: wrap; gap: 6px; font-size: 11px; letter-spacing: .05em; }
.az-bar .btn { font-size: 11px; padding: 0 !important; width: 22px; min-width: 22px; height: 22px; min-height: 22px; line-height: 22px; border-radius: 4px; text-align: center; display: inline-flex; align-items: center; justify-content: center; }
.az-bar .btn svg { width: 14px; height: 14px; }
.commands-table col.name { width: 160px; }
.commands-table col.usage { width: 260px; }
@media (max-width: 1100px) { .commands-table col.usage { width: 200px; } }
@media (max-width: 900px) { .commands-table col.usage { display: none; } }

/* Shared small utilities (migrated from server status page) */
.ml-6 { margin-left: 6px; }
.console-command-group { display: flex; gap: 8px; align-items: center; width: 100%; }
.flex-grow-input { flex: 1; min-width: 0; }
.checkbox-group { display: flex; flex-wrap: wrap; gap: var(--space-3); }
.inline-form { display: inline; }
.input-wide { min-width: 240px; }
.checkbox-row { display: block; }

/* Server Status page styles (migrated from inline partial) */
/* More/expand section for Server Control card */
.card-control .card-more-footer { display: flex; justify-content: flex-start; align-items: center; margin-top: var(--space-2); }
.card-control .card-more-link { background: none; border: none; color: var(--text-tertiary); text-decoration: underline; cursor: pointer; font: inherit; padding: 0; }
.card-control .card-more-link:hover { color: var(--text-primary); }
.card-control .card-more-section { display: none; margin-top: var(--space-3); padding-top: var(--space-3); border-top: 1px solid var(--panel-border); }
.card-control.expanded .card-more-section { display: block; }

/* Language dropdown positioning under its trigger */
.lang-dropdown { position: absolute; right: 0; top: calc(100% + 6px); }

/* Ensure dropdowns within server cards can overflow appropriately */
.server-content > .glass-card { position: relative; z-index: 6000; overflow: visible; }

/* Fixed label width for More-section rows to align controls */
.card-more-section .more-label { flex: 0 0 160px; }

/* Save split dropdown tweaks */
#save-split { overflow: visible; z-index: 6500; display: inline-flex; position: relative; }
#save-split #save-menu { padding: 6px; border-radius: var(--radius-lg); overflow: hidden; }
#save-split > .btn:first-child {
    /* Ensure pill rounding on the left half regardless of other button rules */
    border-top-left-radius: var(--radius-full) !important;
    border-bottom-left-radius: var(--radius-full) !important;
    /* Use standard padding when caret is inline (not overlaid) */
    padding-right: var(--space-4) !important;
}
#save-split > .btn.btn-split-caret {
    /* Ensure pill rounding on the right half */
    border-top-right-radius: var(--radius-full) !important;
    border-bottom-right-radius: var(--radius-full) !important;
    /* Render as an inline half for this specific control (avoid absolute overlay issues) */
    position: static !important;
    width: 38px; min-width: 38px !important; padding-left: 0; padding-right: 0;
    display: inline-flex; align-items: center; justify-content: center;
    border-left: 1px solid var(--border-color) !important;
}
#save-split.is-disabled #save-menu { background: var(--bg-secondary); color: var(--text-secondary); border-color: var(--border-color); }
#save-split.is-disabled > .btn.btn-control { opacity: 0.65; }

/* Server Configuration layout refinements */
.card-config .grid-2 { grid-template-columns: 1fr 1fr; }
@media (max-width: 780px) { .card-config .grid-2 { grid-template-columns: 1fr; } }
.card-config .form-grid-compact { gap: var(--space-2); }
.card-config .form-row { gap: var(--space-2); }
.card-config .form-row:not(.grid-2) { grid-template-columns: 1fr; align-items: start; }
.card-config .form-row:not(.grid-2) > label { margin-bottom: 4px; }
.card-config input.form-input-inline[type="number"] { width: 160px; max-width: 160px; }
@media (max-width: 780px) { .card-config input.form-input-inline[type="number"] { width: 100%; max-width: none; } }
.card-config .message-delay-row .row-controls { display: flex; align-items: center; gap: var(--space-2); justify-content: space-between; width: 100%; }

/* Right-aligned controls in card headers */
.right-title-actions { display: inline-flex; align-items: center; gap: var(--space-2); }

/* Port forward status colors */
.pf-status { font-weight: 600; }
.pf-status-idle { color: #6c757d; }
.pf-status-active { color: #2e8b57; }
.pf-status-error { color: #dc3545; }
.pf-status-pending { color: #0d6efd; }

/* Unified dropdown components */
.dropdown-panel { position: absolute; display: none; min-width: 180px; background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: var(--radius-md); box-shadow: var(--shadow-lg); padding: 6px; z-index: 7000; opacity: 0; transform: translateY(-6px); transition: opacity 120ms ease, transform 120ms ease; }
.dropdown-panel.active { display: block; opacity: 1; transform: translateY(0); }
.dropdown-fixed { position: fixed; }
.dropdown-item { display: block; width: 100%; text-align: left; padding: 8px 10px; border: none; background: transparent; color: var(--text-secondary); border-radius: var(--radius-sm); font: inherit; cursor: pointer; transition: background var(--transition-fast), color var(--transition-fast); }
.dropdown-item:hover { background: var(--surface-soft); color: var(--text-primary); }
.dropdown-item:focus { outline: none; background: var(--surface-soft); color: var(--text-primary); box-shadow: 0 0 0 2px var(--primary-500) inset; }
/* Primary/gradient variant (e.g., Save split menu) */
.dropdown-primary { background: linear-gradient(125deg, var(--primary-500) 0%, var(--primary-600) 100%); color: #f8fafc; border-color: rgba(59,130,246,0.42); box-shadow: var(--shadow-lg); }
.dropdown-primary .dropdown-item { color: #f8fafc; }
.dropdown-primary .dropdown-item:hover { background: rgba(255,255,255,0.12); color: #fff; }
.dropdown-primary .dropdown-item:focus { outline: none; background: rgba(255,255,255,0.16); color: #fff; box-shadow: 0 0 0 2px rgba(255,255,255,0.35) inset; }
.dropdown-disabled, .dropdown-panel:disabled { background: var(--bg-secondary); color: var(--text-secondary); border-color: var(--border-color); }
.dropdown-disabled .dropdown-item:hover { background: var(--surface-soft); color: var(--text-primary); }
@media (max-width: 1200px) {
    .hero-card {
        grid-template-columns: 1fr;
        text-align: center;
    }

    .hero-main,
    .hero-actions {
        justify-content: center;
        flex-wrap: wrap;
    }

    .hero-meta {
        max-width: none;
    }
}

@media (max-width: 768px) {
    body {
        padding: var(--space-3);
    }

    .glass-card,
    .stat-card {
        padding: var(--space-4);
    }

    .form-grid {
        grid-template-columns: 1fr;
    }

    .hero-card { padding: var(--space-4); min-height: 112px; }
}

/* Login page styles (moved from inline) */
.login-container {
    background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.18), transparent 45%),
                radial-gradient(circle at bottom right, rgba(236, 72, 153, 0.18), transparent 40%),
                var(--panel-gradient);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    padding: var(--space-6);
    display: flex;
    align-items: center;
    justify-content: center;
}

.login-card {
    background: var(--panel-gradient);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    backdrop-filter: blur(10px);
    padding: var(--space-6);
    width: 100%;
    max-width: 380px;
    border: 1px solid var(--panel-border);
}

.login-header { text-align: center; margin-bottom: var(--space-6); }
.login-logo {
    width: 68px; height: 68px; margin: 0 auto var(--space-4); display: block;
    border-radius: var(--radius-xl); padding: var(--space-2);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.18);
    object-fit: contain;
}
.login-title { font-size: var(--text-2xl); font-weight: 700; color: var(--text-primary); margin-bottom: var(--space-2); }
.login-subtitle { color: var(--text-tertiary); font-size: var(--text-sm); }

/* Login + generic inline error banner */
.error-message { background: rgba(239, 68, 68, 0.12); color: var(--danger-500); padding: var(--space-3); border-radius: var(--radius-md); margin-bottom: var(--space-4); font-size: var(--text-sm); animation: slideIn 0.3s ease-out; border: 1px solid var(--danger-500); }

@keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

.form-loading { opacity: 0.7; pointer-events: none; }
.btn-loading { position: relative; }
.btn-loading::after {
    content: '';
    position: absolute;
    width: 16px; height: 16px;
    margin: auto;
    border: 2px solid transparent; border-top-color: currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* Toast system (global) */
.toast-container {
    position: fixed;
    top: var(--space-6);
    right: var(--space-6);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    max-width: 400px;
    pointer-events: none;
}

.global-htmx-indicator {
    position: fixed;
    top: var(--space-6);
    right: var(--space-6);
    z-index: 9998;
    display: none;
    align-items: center;
    gap: var(--space-2);
    padding: 6px 10px;
    font-size: var(--text-sm);
    color: var(--text-primary);
    background: var(--panel-gradient);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-full);
    backdrop-filter: blur(18px);
    box-shadow: var(--shadow-md);
    pointer-events: none;
}
.global-htmx-indicator.active { display: inline-flex; }
.global-htmx-indicator .spinner {
    width: 16px; height: 16px; border-radius: 50%;
    border: 2px solid var(--panel-border);
    border-top-color: var(--primary-600);
    animation: spin 0.8s linear infinite;
}

.toast {
    display: flex; align-items: flex-start; gap: var(--space-3);
    padding: var(--space-4);
    background: var(--panel-gradient);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-lg);
    backdrop-filter: blur(24px);
    box-shadow: var(--shadow-lg);
    pointer-events: all;
    animation: toast-slide-in 0.3s ease-out;
    min-width: 320px;
}
.toast.toast-exit { animation: toast-slide-out 0.3s ease-out forwards; }
@keyframes toast-slide-in { from { transform: translateX(calc(100% + var(--space-6))); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes toast-slide-out { from { transform: translateX(0); opacity: 1; } to { transform: translateX(calc(100% + var(--space-6))); opacity: 0; } }
.toast-icon { flex-shrink: 0; width: 24px; height: 24px; border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; }
.toast-success .toast-icon { background: rgba(34, 197, 94, 0.15); color: var(--success-500); }
.toast-error .toast-icon { background: rgba(239, 68, 68, 0.15); color: var(--danger-500); }
.toast-info .toast-icon { background: rgba(59, 130, 246, 0.15); color: var(--primary-500); }
.toast-warning .toast-icon { background: rgba(245, 158, 11, 0.15); color: var(--warning-500); }
.toast-content { flex: 1; min-width: 0; }
.toast-title { font-weight: 600; font-size: var(--text-sm); color: var(--text-primary); margin: 0 0 var(--space-1) 0; }
.toast-message { font-size: var(--text-sm); color: var(--text-secondary); margin: 0; line-height: 1.5; }
.toast-close { flex-shrink: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border: none; background: none; color: var(--text-tertiary); cursor: pointer; border-radius: var(--radius-sm); transition: all 0.2s ease; }
.toast-close:hover { background: var(--bg-tertiary); color: var(--text-primary); }
@media (max-width: 768px) {
    .toast-container { top: var(--space-4); right: var(--space-4); left: var(--space-4); max-width: none; }
    .toast { min-width: 0; }
}

/* User menu (avatar + dropdown) */
.user-menu { position: relative; }
.avatar-btn { width: 34px; height: 34px; border-radius: 50%; position: relative; display: inline-flex; align-items: center; justify-content: center; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text-primary); font-weight: 700; font-size: 0.8rem; padding: 0; cursor: pointer; box-shadow: var(--shadow-sm); user-select: none; }
.avatar-btn:hover { background: var(--surface-soft); color: var(--text-primary); }
.avatar-initials { letter-spacing: 0.3px; }
.role-badge { position: absolute; right: -2px; bottom: -2px; min-width: 14px; height: 14px; padding: 0 3px; border-radius: 999px; background: var(--accent-600); color: white; font-size: 9px; line-height: 14px; font-weight: 800; border: 1px solid var(--bg-secondary); }
/* User dropdown relies on unified .dropdown-panel and .dropdown-item; keep z-index lower than toasts */
.user-dropdown { z-index: 4000; }

/* Footer */
.page-footer { border-top: 1px solid var(--border-color); background: var(--bg-primary); }
.page-footer .footer-inner { display: flex; align-items: center; gap: var(--space-3); padding: var(--space-4) var(--space-3); }
.page-footer .footer-left { color: var(--text-tertiary); font-size: var(--text-sm); }
.page-footer .footer-right { margin-left: auto; color: var(--text-tertiary); font-size: var(--text-xs); }
.page-footer .footer-links { display: inline-flex; align-items: center; gap: var(--space-2); color: var(--text-secondary); font-size: var(--text-sm); }
.page-footer .sep { color: var(--text-tertiary); }
.page-footer .link { color: var(--primary-600); text-decoration: none; }
.page-footer .link:hover { text-decoration: underline; }
@media (max-width: 640px) { .page-footer .footer-inner { flex-wrap: wrap; } .page-footer .footer-right { width: 100%; text-align: right; } }

/* Slightly tighter button widths on very small screens */
@media (max-width: 480px) {
    :root {
        --btn-w-xs: 64px;
        --btn-w-sm: 96px;
        --btn-w-md: 112px;
        --btn-w-lg: 144px;
    }
    /* Reduce gaps so button groups fit better on narrow screens */
    .button-group { gap: var(--space-1); }
    .chat-input-form { gap: var(--space-1); }
    /* Keep FAB compact on very small screens */
    .floating-action:hover,
    .floating-action:focus-visible { width: 58px; justify-content: center; }
    .floating-action:hover::after,
    .floating-action:focus-visible::after { opacity: 0; transform: translateX(6px); }
}
