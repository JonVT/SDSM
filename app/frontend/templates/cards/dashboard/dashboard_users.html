{{define "cards/dashboard_users.html"}}
{{$total := .total}}
{{if not $total}}{{$total = 0}}{{end}}
{{$admins := .admins}}
{{if not $admins}}{{$admins = 0}}{{end}}
{{$operators := .operators}}
{{if not $operators}}{{$operators = 0}}{{end}}
{{$isEmpty := false}}
{{if .empty}}{{$isEmpty = true}}{{end}}
<div id="dashboard-card-users"
    class="card users-card"
    role="link"
    tabindex="0"
    aria-label="Open Users screen"
    data-card-id="dashboard-users"
    data-card-navigate="/users"
    data-card-assets='["/static/js/cards/dashboard_users.js"]'
    data-user-card
    hx-get="/dashboard/cards/dashboard-users"
    hx-trigger="sdsm:card-refresh[event.detail.cardId == 'dashboard-users'] from:body"
    hx-target="this"
    hx-swap="outerHTML">
    <div class="card-header">
        <div class="row gap-3 items-center">
            <h2 class="card-title">Users</h2>
            <span class="card-nav-indicator" aria-hidden="true">
                <span>Opens Users</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="7" y1="17" x2="17" y2="7"/><polyline points="7 7 17 7 17 17"/></svg>
            </span>
        </div>
        <div class="row gap-2">
                <button type="button"
                    class="btn btn-ghost btn-icon"
                    data-card-nav-exempt="true"
                    title="Refresh"
                    aria-label="Refresh users summary"
                    data-card-refresh>
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0 1 15-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 0 1-15 6.7L3 16"/></svg>
            </button>
            <a href="/users" class="btn btn-info" hx-get="/api/pages/users" hx-push-url="/users" data-card-nav-exempt="true">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><path d="M20 8v6"/><path d="M23 11h-6"/></svg>
                <span>Manage Users</span>
            </a>
        </div>
    </div>
    <div class="card-body">
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <div>
                <div class="text-tertiary text-xs uppercase tracking-wide">Total</div>
                <div class="text-2xl font-semibold" data-user-total>{{ $total }}</div>
            </div>
            <div>
                <div class="text-tertiary text-xs uppercase tracking-wide">Admins</div>
                <div class="text-xl font-semibold" data-user-admins>{{ $admins }}</div>
            </div>
            <div>
                <div class="text-tertiary text-xs uppercase tracking-wide">Operators</div>
                <div class="text-xl font-semibold" data-user-operators>{{ $operators }}</div>
            </div>
        </div>
        <p class="text-tertiary text-sm mt-4 {{if not $isEmpty}}hidden{{end}}" data-user-empty>
            {{if $isEmpty}}No users have been created yet.{{else}}No users available.{{end}}
        </p>
    </div>
</div>
{{end}}
